Python scripts
--------------

## Analysis scripts

### per_region.py

This script is the backbone of our Python analysis toolkit.
It figures out from trace data how long the program spent in `work`, `sync`, and `idle` states, and (optionally) how much energy was burned during each state.

The results are output as a CSV file for use by the plotting scripts. (See the PInsightPaper repo for the latest plotting scripts.)

Usage (from the top-level folder in PInsight):

    python3 python/per_region.py -j <NUM_THREADS_FOR_PROCESSING> /tmp/<TRACE_NAME>/ <NUM_THREADS_IN_TRACE>

### Examples

Load a trace made over 56-cores, and only compute performance information:

    python3 python/per_region.py -j 56 --max-energy-uj 262143328850 /tmp/lulesh-energy/ 56

Load a trace made over 56-cores with energy data, and compute performance *and* energy results (Note the `-e` flag):

    python3 python/per_region.py -e -j 56 --max-energy-uj 262143328850 /tmp/lulesh-energy/ 56


## Plotting

The plotting scripts (like almost all of the scripts present here) have usage info available on the command line when run without arguments, or with the `--help` flag.

To generate nice plots in your web browser of the per-region results, please use the plotting scripts, with the CSV files generated by the analysis scripts as an argument.

The PInsightPaper repo has two scripts of interest in `/plots`:

 - `mwplot.py` :: Master/Worker plots across all region IDs.
 - `plot.py` :: Allows generating `performance` or `energy` plots for specific regions.

