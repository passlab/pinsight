<?xml version="1.0" encoding="UTF-8"?>
<tmfxml xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="xmldefinition.xsd">

	<!-- The state provider assigns states from events -->
	<stateProvider id="edu.oakland.visuomp.stateProvider" version="0">
		<head>
			<traceType id="org.eclipse.linuxtools.lttng2.ust.tracetype" />
			<label value="VISUOMP OpenMP Trace Analysis" />
		</head>

		<!-- Convenience names for the state values -->
		<definedValue name="STATE_THREAD_STARTED" value="1" />
		<definedValue name="STATE_THREAD_IDLE" value="2" />
		<definedValue name="STATE_TRANSITION" value="9" /> <!-- changing state -->

		<!-- 20 - 49 are for those states in which threads are doing work -->
		<definedValue name="STATE_IN_PARALLEL" value="20" />
		<definedValue name="STATE_IN_IMPLICIT_TASK" value="21" />
		<definedValue name="STATE_IN_WORK_LOOP" value="22" />
		<definedValue name="STATE_IN_WORK_SECTIONS" value="23" />
		<definedValue name="STATE_IN_WORK_SINGLE_EXECUTOR" value="24" />
		<definedValue name="STATE_IN_WORK_SINGLE_OTHER" value="25" />
		<definedValue name="STATE_IN_WORK_WORKSHARE" value="26" />
		<definedValue name="STATE_IN_MASTER" value="27" />

		<!-- 50 - 69 are for those states in which threads are synchronizing -->
		<definedValue name="STATE_SYNC_BARRIER" value="51" />
		<definedValue name="STATE_SYNC_BARRIER_WAIT" value="52" />
		<definedValue name="STATE_SYNC_TASKWAIT" value="53" />
		<definedValue name="STATE_SYNC_TASKWAIT_WAIT" value="54" />
		<definedValue name="STATE_SYNC_TASKGROUP" value="55" />
		<definedValue name="STATE_SYNC_TASKGROUP_WAIT" value="56" />

		<definedValue name="STATE_THREAD_TERMINATED" value="100" />

		<!-- Event handlers -->
		<eventHandler eventName="lttng_visuomp:parallel_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_IN_PARALLEL" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:parallel_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_TRANSITION" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:implicit_task_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_IN_IMPLICIT_TASK" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:implicit_task_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_TRANSITION" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:work_loop_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_IN_WORK_LOOP" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:work_loop_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_TRANSITION" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:work_sections_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_IN_WORK_SECTIONS" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:work_sections_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_TRANSITION" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:work_single_executor_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_IN_WORK_SINGLE_EXECUTOR" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:work_single_executor_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_TRANSITION" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:work_single_other_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_IN_WORK_SINGLE_OTHER" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:work_single_other_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_TRANSITION" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:work_workshare_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_IN_WORK_WORKSHARE" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:work_workshare_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_TRANSITION" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:master_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_IN_MASTER" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:master_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_TRANSITION" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:thread_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_THREAD_STARTED" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:thread_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_THREAD_TERMINATED" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:thread_idle_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_THREAD_IDLE" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:thread_idle_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_TRANSITION" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:barrier_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_SYNC_BARRIER" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:barrier_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_TRANSITION" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:taskwait_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_SYNC_TASKWAIT" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:taskwait_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_TRANSITION" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:taskgroup_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_SYNC_TASKGROUP" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:taskgroup_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_TRANSITION" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:barrier_wait_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_SYNC_BARRIER_WAIT" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:barrier_wait_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_TRANSITION" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:taskwait_wait_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_SYNC_TASKWAIT_WAIT" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:taskwait_wait_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_TRANSITION" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:taskgroup_wait_begin">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_SYNC_TASKGROUP_WAIT" />
			</stateChange>
		</eventHandler>
		<eventHandler eventName="lttng_visuomp:taskgroup_wait_end">
			<stateChange>
				<stateAttribute type="constant" value="Threads" />
				<stateAttribute type="eventField" value="gtid" />
				<stateValue type="int" value="$STATE_TRANSITION" />
			</stateChange>
		</eventHandler>

	</stateProvider>

	<!-- This is the definition of the time-graph view -->
	<timeGraphView id="org.eclipse.linuxtools.tmf.analysis.xml.sstimeview">
		<head>
			<analysis id="edu.oakland.visuomp.stateProvider" />
			<label value="VISUOMP OpenMP Trace View" />
		</head>
	
		<!-- Colors assigned to the state values, see http://www.rapidtables.com/web/color/ -->
		<definedValue name="STATE_THREAD_STARTED" value="1" color="#FFDD00" /> <!-- yellow -->
		<definedValue name="STATE_THREAD_IDLE" value="2" color="#FF00FF" /> <!-- FUCHSIA -->
		<definedValue name="STATE_TRANSITION" value="9" color="#FFFFFF" /> <!-- white -->

		<!-- 20 - 49 are for those states in which threads are doing work -->
		<definedValue name="STATE_IN_PARALLEL" value="20" color="#00FF00" /> <!-- lime -->
		<definedValue name="STATE_IN_IMPLICIT_TASK" value="21" color="#00CC11" /> <!-- green -->
		<definedValue name="STATE_IN_WORK_LOOP" value="22" color="#32CD32" /> <!-- limegreen -->
		<definedValue name="STATE_IN_WORK_SECTIONS" value="23" color="#006400" /> <!-- dark green -->
		<definedValue name="STATE_IN_WORK_SINGLE_EXECUTOR" value="24" color="#228B22" /> <!-- forestgreen -->
		<definedValue name="STATE_IN_WORK_SINGLE_OTHER" value="25" color="#ADFF2F" />  <!-- greenyelow -->
		<definedValue name="STATE_IN_WORK_WORKSHARE" value="26" color="#006400"/> <!-- dark green -->
		<definedValue name="STATE_IN_MASTER" value="27" color="#00FF7F"/> <!-- spring green -->
		<!-- 50 - 69 are for those states in which threads are synchronizing -->
		<definedValue name="STATE_SYNC_BARRIER" value="51" color="#FF0000" /> <!-- red -->
		<definedValue name="STATE_SYNC_BARRIER_WAIT" value="52" color="#CD5C5C" /> <!-- indianred -->
		<definedValue name="STATE_SYNC_TASKWAIT" value="53" color="#FF0000" />
		<definedValue name="STATE_SYNC_TASKWAIT_WAIT" value="54" color="#F08080"/> <!-- lightcoral -->
		<definedValue name="STATE_SYNC_TASKGROUP" value="55" color="#FF0000" />
		<definedValue name="STATE_SYNC_TASKGROUP_WAIT" value="56" color="#FA8072" /> <!-- Salmon -->

		<definedValue name="STATE_THREAD_TERMINATED" value="100" color="#FFFFFF" /> <!-- white -->

		<!-- Which attributes to "print" in the view -->
		<entry path="Threads/*">
			<display type="self" />
		</entry>
	</timeGraphView>

</tmfxml>
